DROP TABLE FILM;
CREATE TABLE FILM (ID_FILM INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), TITOLO VARCHAR(100), ID_GENERE INTEGER,
URL_TRAILER VARCHAR(255), DURATA INTEGER, TRAMA VARCHAR(1000), URI_LOCANDINA
VARCHAR(255), CONSTRAINT FILM_PK PRIMARY KEY (ID_FILM));
DROP TABLE GENERE;
CREATE TABLE GENERE (ID_GENERE INTEGER NOT NULL, DESCRIZIONE VARCHAR(50), CONSTRAINT
GENERE_PK PRIMARY KEY (ID_GENERE));
DROP TABLE POSTO;
CREATE TABLE POSTO (ID_POSTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), ID_SALA INTEGER, RIGA INTEGER, COLONNA
INTEGER, ESISTE BOOLEAN, CONSTRAINT POSTO_PK PRIMARY KEY (ID_POSTO));
DROP TABLE PRENOTAZIONE;
CREATE TABLE PRENOTAZIONE (ID_PRENOTAZIONE INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), ID_UTENTE INTEGER,
ID_SPETTACOLO INTEGER, ID_PREZZO INTEGER, ID_POSTO INTEGER, DATA_ORA_OPERAZIONE
TIMESTAMP, CONSTRAINT PRENOTAZIONE_PK PRIMARY KEY (ID_PRENOTAZIONE));
DROP TABLE PREZZO;
CREATE TABLE PREZZO (ID_PREZZO INTEGER NOT NULL, TIPO VARCHAR(50), PREZZO DOUBLE,
CONSTRAINT PREZZO_PK PRIMARY KEY (ID_PREZZO));
DROP TABLE RUOLO;
CREATE TABLE RUOLO (ID_RUOLO INTEGER NOT NULL, RUOLO VARCHAR(50), CONSTRAINT RUOLO_PK
PRIMARY KEY (ID_RUOLO));
DROP TABLE SALA;
CREATE TABLE SALA (ID_SALA INTEGER NOT NULL, DESCRIZIONE VARCHAR(50), CONSTRAINT SALA_PK
PRIMARY KEY (ID_SALA));
DROP TABLE SPETTACOLO;
CREATE TABLE SPETTACOLO (ID_SPETTACOLO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), ID_FILM INTEGER, DATA_ORA
TIMESTAMP, ID_SALA INTEGER, CONSTRAINT SPETTACOLO_PK PRIMARY KEY (ID_SPETTACOLO));
DROP TABLE UTENTE;
CREATE TABLE UTENTE (ID_UTENTE INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1), EMAIL VARCHAR(50), PASSWORD VARCHAR(50),
CREDITO DOUBLE DEFAULT 0 NOT NULL, ID_RUOLO INTEGER, CONSTRAINT UTENTE_PK PRIMARY KEY
(ID_UTENTE));
ALTER TABLE FILM ADD CONSTRAINT FILM__GENERE_FK FOREIGN KEY (ID_GENERE) REFERENCES GENERE
(ID_GENERE);
ALTER TABLE POSTO ADD CONSTRAINT POSTO_SALA_FK FOREIGN KEY (ID_SALA) REFERENCES SALA
(ID_SALA);
ALTER TABLE PRENOTAZIONE ADD CONSTRAINT PRENOTAZIONE_POSTO_FK FOREIGN KEY (ID_POSTO)
REFERENCES POSTO (ID_POSTO);
ALTER TABLE PRENOTAZIONE ADD CONSTRAINT PRENOTAZIONE_PREZZO_FK FOREIGN KEY (ID_PREZZO)
REFERENCES PREZZO (ID_PREZZO);
ALTER TABLE PRENOTAZIONE ADD CONSTRAINT PRENOTAZIONE_SPETTACOLO_FK FOREIGN KEY
(ID_SPETTACOLO) REFERENCES SPETTACOLO (ID_SPETTACOLO);
ALTER TABLE PRENOTAZIONE ADD CONSTRAINT PRENOTAZIONE_UTENTE_FK FOREIGN KEY (ID_UTENTE)
REFERENCES UTENTE (ID_UTENTE);
ALTER TABLE SPETTACOLO ADD CONSTRAINT SPETTACOLO_FILM_FK FOREIGN KEY (ID_FILM) REFERENCES
FILM (ID_FILM);
ALTER TABLE SPETTACOLO ADD CONSTRAINT SPETTACOLO_SALA_FK FOREIGN KEY (ID_SALA) REFERENCES
SALA (ID_SALA);
ALTER TABLE UTENTE ADD CONSTRAINT UTENTE_RUOLO_FK FOREIGN KEY (ID_RUOLO) REFERENCES RUOLO
(ID_RUOLO);